# Лабораторная работа 6: Рефакторинг

## Найденные проблемы (Code Smells)

1. **Длинный метод (Long Method)** - функция `process_checkout()` содержала 50+ строк и делала всё: парсинг, валидацию, расчеты.

2. **Магические числа (Magic Numbers)** - в коде были "зашиты" числа без объяснения: 0.10, 0.20, 0.05, 50, 10, 0.21.

3. **Сложное условие (Complex Conditional)** - блок расчета скидки содержал цепочку из 5 условий if-elif-elif.

4. **Нарушение SRP (Single Responsibility Principle)** - одна функция отвечала за слишком много разных задач.

## Примененные рефакторинги

1. **Выделение метода (Extract Method)** - разбили большую функцию на маленькие:
   - `parse_request()` - парсинг входных данных
   - `validate_request()` - валидация
   - `calculate_subtotal()` - подсчет суммы
   - `calculate_discount()` - расчет скидки
   - `calculate_tax()` - расчет налога
   - `generate_order_id()` - генерация ID

2. **Замена магического числа константой (Replace Magic Number with Symbolic Constant)**:
   - `DEFAULT_CURRENCY = "USD"`
   - `TAX_RATE = 0.21`
   - Созданы структуры для купонов с понятными названиями полей

3. **Замена кода условием на полиморфизм (частично)** - вынесли данные о купонах в отдельные структуры, чтобы логика была в одном месте.

4. **Упрощение чтения** - код в `process_checkout()` теперь читается как сценарий:
